<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>OpenCV: Android Development with OpenCV</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
//<![CDATA[
MathJax.Hub.Config(
{
  TeX: {
      Macros: {
          matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
          fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
          forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
          forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
          vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
          vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
          cameramatrix: ["#1 = \\begin{bmatrix} f_x & 0 & c_x\\\\ 0 & f_y & c_y\\\\ 0 & 0 & 1 \\end{bmatrix}", 1],
          distcoeffs: ["(k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \\tau_x, \\tau_y]]]]) \\text{ of 4, 5, 8, 12 or 14 elements}"],
          distcoeffsfisheye: ["(k_1, k_2, k_3, k_4)"],
          hdotsfor: ["\\dots", 1],
          mathbbm: ["\\mathbb{#1}", 1],
          bordermatrix: ["\\matrix{#1}", 1]
      }
  }
}
);
//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">4.9.0</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/df8/tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="../../df/d65/tutorial_table_of_content_introduction.html">Introduction to OpenCV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Android Development with OpenCV </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Prev Tutorial:</b> <a class="el" href="../../d9/d3f/tutorial_android_dev_intro.html">Introduction into Android Development</a></p>
<p><b>Next Tutorial:</b> <a class="el" href="../../de/dfe/tutorial_android_dnn_intro.html">How to run deep networks on Android device</a></p>
<table class="doxtable">
<tr>
<th align="right"></th><th align="left"></th></tr>
<tr>
<td align="right">Original authors </td><td align="left">Alexander Panov, Rostislav Vasilikhin </td></tr>
<tr>
<td align="right">Compatibility </td><td align="left">OpenCV &gt;= 4.9.0 </td></tr>
</table>
<p>This tutorial has been created to help you use OpenCV library within your Android project.</p>
<p>This guide was checked on Ubuntu but contains no platform-dependent parts, therefore should be compatible with any OS supported by Android Studio and OpenCV4Android SDK.</p>
<p>This tutorial assumes you have the following installed and configured:</p>
<ul>
<li>Android Studio</li>
<li>JDK</li>
<li>Android SDK and NDK</li>
<li>OpenCV for Android SDK from official <a href="https://github.com/opencv/opencv/releases">release page on Github</a> or <a href="https://sourceforge.net/projects/opencvlibrary/">SourceForge</a>. Advanced: as alternative the SDK may be built from source code by <a href="https://github.com/opencv/opencv/wiki/Custom-OpenCV-Android-SDK-and-AAR-package-build">instruction on wiki</a>.</li>
</ul>
<p>If you need help with anything of the above, you may refer to our <a class="el" href="../../d9/d3f/tutorial_android_dev_intro.html">Introduction into Android Development</a> guide.</p>
<p>If you encounter any error after thoroughly following these steps, feel free to contact us via OpenCV <a href="https://forum.opencv.org">forum</a>. We'll do our best to help you out.</p>
<h2>Hello OpenCV sample </h2>
<p>In this section we're gonna create a simple app that does nothing but OpenCV loading. In next section we'll extend it to support camera.</p>
<p>In addition to this instruction you can use some video guide, for example <a href="https://www.youtube.com/watch?v=bR7lL886-uc&amp;ab_channel=ProgrammingHut">this one</a></p>
<ol type="1">
<li><p class="startli">Open Android Studio and create empty project by choosing <em><b>Empty Views Activity</b></em></p>
<div class="image">
<img src="../../create_empty_project.png" alt="create_empty_project.png"/>
</div>
</li>
<li><p class="startli">Setup the project:</p><ul>
<li>Choose <em><b>Java</b></em> language</li>
<li>Choose <em><b>Groovy DSL</b></em> build configuration language</li>
<li>Choose <em><b>Minumum SDK</b></em> with the version number not less than was used during OpenCV 4 Android build<ul>
<li>If you don't know it, you can find it in file <code>OpenCV-android-sdk/sdk/build.gradle</code> at <code>android -&gt; defaultConfig -&gt; minSdkVersion</code></li>
</ul>
</li>
</ul>
<div class="image">
<img src="../../setup_project.png" alt="setup_project.png"/>
</div>
</li>
<li><p class="startli">Click <em><b>File -&gt; New -&gt; Import module...</b></em> and select OpenCV SDK path</p>
<div class="image">
<img src="../../sdk_path.png" alt="sdk_path.png"/>
</div>
</li>
<li><p class="startli">Set module name as <code>OpenCV</code> and press <code>Finish</code></p>
<div class="image">
<img src="../../module_name.png" alt="module_name.png"/>
</div>
</li>
<li>OpenCV also provides experiemental Kotlin support. Please add Android Kotlin plugin to <code>MyApplication/OpenCV/build.gradle</code> file: <div class="fragment"><div class="line">plugins {</div><div class="line">    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.7.10&#39; #version may differ for your setup</div><div class="line">}</div></div><!-- fragment --> Like this: <div class="image">
<img src="../../gradle_ocv_fix.png" alt="gradle_ocv_fix.png"/>
</div>
 If you don't do this, you may get an error: <div class="fragment"><div class="line">Task failed with an exception.</div><div class="line">-----------</div><div class="line">* Where:</div><div class="line">Build file &#39;/home/alexander/AndroidStudioProjects/MyApplication/opencv/build.gradle&#39; line: 4</div><div class="line"></div><div class="line">* What went wrong:</div><div class="line">A problem occurred evaluating project &#39;:opencv&#39;.</div><div class="line">&gt; Plugin with id &#39;kotlin-android&#39; not found.</div></div><!-- fragment --> The fix was found <a href="https://stackoverflow.com/questions/73225714/import-opencv-sdk-to-android-studio-chipmunk">here</a></li>
<li>OpenCV project uses <code>aidl</code> and <code>buildConfig</code> features. Please enable them in <code>MyApplication/OpenCV/build.gradle</code> file to <code>android</code> block: <div class="fragment"><div class="line">buildFeatures{</div><div class="line">    aidl true</div><div class="line">    buildConfig true</div><div class="line">}</div></div><!-- fragment --> Like this: <div class="image">
<img src="../../module_gradle_fix.png" alt="module_gradle_fix.png"/>
</div>
 If you don't do this, you may get an error: <div class="fragment"><div class="line">JavaCameraView.java:15: error: cannot find symbol import org.opencv.BuildConfig; ^ symbol: class BuildConfig location: package org.opencv</div></div><!-- fragment --> The fix was found <a href="https://stackoverflow.com/questions/76374886/error-cannot-find-symbol-import-org-opencv-buildconfig-android-studio">here</a> and <a href="https://forum.opencv.org/t/task-compiledebugjavawithjavac-failed/13667/4">here</a></li>
<li><p class="startli">Add the module to the project:</p><ul>
<li>Click <em><b>File -&gt; Project structure... -&gt; Dependencies -&gt; All modules -&gt; + (Add Dependency button) -&gt; Module dependency</b></em></li>
</ul>
<div class="image">
<img src="../../add_module_1.png" alt="add_module_1.png"/>
</div>
<ul>
<li>Choose <code>app</code></li>
</ul>
<div class="image">
<img src="../../add_module_2.png" alt="add_module_2.png"/>
</div>
<ul>
<li>Select <code>OpenCV</code></li>
</ul>
<div class="image">
<img src="../../add_module_3.png" alt="add_module_3.png"/>
</div>
</li>
<li>Before using any OpenCV function you have to load the library first. If you application includes other OpenCV-dependent native libraries you should load them <em><b>after</b></em> OpenCV initialization. Add the folowing code to load the library at app start: <div class="fragment"><div class="line">        <span class="keywordflow">if</span> (OpenCVLoader.initLocal()) {</div><div class="line">            Log.i(TAG, <span class="stringliteral">&quot;OpenCV loaded successfully&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            Log.e(TAG, <span class="stringliteral">&quot;OpenCV initialization failed!&quot;</span>);</div><div class="line">            (Toast.makeText(<span class="keyword">this</span>, <span class="stringliteral">&quot;OpenCV initialization failed!&quot;</span>, Toast.LENGTH_LONG)).show();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div></div><!-- fragment --> Like this: <div class="image">
<img src="../../sample_code.png" alt="sample_code.png"/>
</div>
</li>
<li><p class="startli">Choose a device to check the sample on and run the code by pressing <code>run</code> button</p>
<div class="image">
<img src="../../run_app.png" alt="run_app.png"/>
</div>
</li>
</ol>
<h2>Camera view sample </h2>
<p>In this section we'll extend our empty OpenCV app created in the previous section to support camera. We'll take camera frames and display them on the screen.</p>
<ol type="1">
<li>Tell a system that we need camera permissions. Add the following code to the file <code>MyApplication/app/src/main/AndroidManifest.xml</code>: <div class="fragment"><div class="line">    &lt;<span class="keywordtype">uses-permission</span> <span class="keyword">android:name</span>=<span class="stringliteral">&quot;android.permission.CAMERA&quot;</span>/&gt;</div><div class="line"></div><div class="line">    &lt;<span class="keywordtype">uses-feature</span> <span class="keyword">android:name</span>=<span class="stringliteral">&quot;android.hardware.camera&quot;</span> <span class="keyword">android:required</span>=<span class="stringliteral">&quot;false&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">uses-feature</span> <span class="keyword">android:name</span>=<span class="stringliteral">&quot;android.hardware.camera.autofocus&quot;</span> <span class="keyword">android:required</span>=<span class="stringliteral">&quot;false&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">uses-feature</span> <span class="keyword">android:name</span>=<span class="stringliteral">&quot;android.hardware.camera.front&quot;</span> <span class="keyword">android:required</span>=<span class="stringliteral">&quot;false&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">uses-feature</span> <span class="keyword">android:name</span>=<span class="stringliteral">&quot;android.hardware.camera.front.autofocus&quot;</span> <span class="keyword">android:required</span>=<span class="stringliteral">&quot;false&quot;</span>/&gt;</div></div><!-- fragment --> Like this: <div class="image">
<img src="../../camera_permissions.png" alt="camera_permissions.png"/>
</div>
</li>
<li><p class="startli">Go to <code>activity_main.xml</code> layout and delete TextView with text "Hello World!"</p>
<div class="image">
<img src="../../delete_text.png" alt="delete_text.png"/>
</div>
<p class="startli">This can also be done in Code or Split mode by removing the <code>TextView</code> block from XML file.</p>
</li>
<li><p class="startli">Add camera view to the layout:</p><ol type="a">
<li>Add a scheme into layout description: <div class="fragment"><div class="line"><span class="keyword">xmlns:opencv</span>=<span class="stringliteral">&quot;http://schemas.android.com/apk/res-auto&quot;</span></div></div><!-- fragment --></li>
<li>Replace <code>TextView</code> with <code>org.opencv.android.JavaCameraView</code> widget: <div class="fragment"><div class="line">    &lt;<span class="keywordtype">org.opencv.android.JavaCameraView</span></div><div class="line">        <span class="keyword">android:layout_width</span>=<span class="stringliteral">&quot;fill_parent&quot;</span></div><div class="line">        <span class="keyword">android:layout_height</span>=<span class="stringliteral">&quot;fill_parent&quot;</span></div><div class="line">        <span class="keyword">android:visibility</span>=<span class="stringliteral">&quot;gone&quot;</span></div><div class="line">        <span class="keyword">android:id</span>=<span class="stringliteral">&quot;@+id/tutorial1_activity_java_surface_view&quot;</span></div><div class="line">        <span class="keyword">opencv:show_fps</span>=<span class="stringliteral">&quot;true&quot;</span></div><div class="line">        <span class="keyword">opencv:camera_id</span>=<span class="stringliteral">&quot;any&quot;</span> /&gt;</div></div><!-- fragment --></li>
<li>If you get a layout warning replace <code>fill_parent</code> values by <code>match_parent</code> for <code>android:layout_width</code> and <code>android:layout_height</code> properties</li>
</ol>
<p class="startli">You'll get a code like this:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">FrameLayout</span> <span class="keyword">xmlns:android</span>=<span class="stringliteral">&quot;http://schemas.android.com/apk/res/android&quot;</span></div><div class="line">    <span class="keyword">xmlns:tools</span>=<span class="stringliteral">&quot;http://schemas.android.com/tools&quot;</span></div><div class="line">    <span class="keyword">xmlns:opencv</span>=<span class="stringliteral">&quot;http://schemas.android.com/apk/res-auto&quot;</span></div><div class="line">    <span class="keyword">android:layout_width</span>=<span class="stringliteral">&quot;match_parent&quot;</span></div><div class="line">    <span class="keyword">android:layout_height</span>=<span class="stringliteral">&quot;match_parent&quot;</span> &gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- [camera_view] --&gt;</span></div><div class="line">    &lt;<span class="keywordtype">org.opencv.android.JavaCameraView</span></div><div class="line">        <span class="keyword">android:layout_width</span>=<span class="stringliteral">&quot;fill_parent&quot;</span></div><div class="line">        <span class="keyword">android:layout_height</span>=<span class="stringliteral">&quot;fill_parent&quot;</span></div><div class="line">        <span class="keyword">android:visibility</span>=<span class="stringliteral">&quot;gone&quot;</span></div><div class="line">        <span class="keyword">android:id</span>=<span class="stringliteral">&quot;@+id/tutorial1_activity_java_surface_view&quot;</span></div><div class="line">        <span class="keyword">opencv:show_fps</span>=<span class="stringliteral">&quot;true&quot;</span></div><div class="line">        <span class="keyword">opencv:camera_id</span>=<span class="stringliteral">&quot;any&quot;</span> /&gt;</div><div class="line">    <span class="comment">&lt;!-- [camera_view] --&gt;</span></div><div class="line"></div><div class="line">&lt;/<span class="keywordtype">FrameLayout</span>&gt;</div></div><!-- fragment --></li>
<li>Inherit the main class from <code>org.opencv.android.CameraActivity</code>. CameraActivity implements camera perimission requiest and some other utilities needed for CV application. Methods we're interested in to override are <code>onCreate</code>, <code>onDestroy</code>, <code>onPause</code>, <code>onResume</code> and <code>getCameraViewList</code></li>
<li>Implement the interface <code>org.opencv.android.CameraBridgeViewBase.CvCameraViewListener2</code> <code>onCameraFrame</code> method should return the <code>Mat</code> object with content for render. The sample just returns camera frame for preview: <code>return inputFrame.rgba();</code></li>
<li>Allocate <code>org.opencv.android.CameraBridgeViewBase</code> object:<ul>
<li>It should be created at app start (<code>onCreate</code> method) and this class should be set as a listener</li>
<li>At pause/resume (<code>onPause</code>, <code>onResume</code> methods) it should be disabled/enabled</li>
<li>Should be disabled at app finish (<code>onDestroy</code> method)</li>
<li>Should be returned in <code>getCameraViewList</code></li>
</ul>
</li>
<li><p class="startli">Optionally you can forbid the phone to dim screen or lock:</p>
<div class="fragment"><div class="line">        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);</div></div><!-- fragment --><p> Finally you'll get source code similar to this:</p>
</li>
</ol>
<div class="fragment"><div class="line"><span class="keyword">package </span>org.opencv.samples.tutorial1;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.opencv.android.CameraActivity;</div><div class="line"><span class="keyword">import</span> org.opencv.android.CameraBridgeViewBase.CvCameraViewFrame;</div><div class="line"><span class="keyword">import</span> org.opencv.android.OpenCVLoader;</div><div class="line"><span class="keyword">import</span> org.opencv.core.Mat;</div><div class="line"><span class="keyword">import</span> org.opencv.android.CameraBridgeViewBase;</div><div class="line"><span class="keyword">import</span> org.opencv.android.CameraBridgeViewBase.CvCameraViewListener2;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.SurfaceView;</div><div class="line"><span class="keyword">import</span> android.view.WindowManager;</div><div class="line"><span class="keyword">import</span> android.widget.Toast;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Collections;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Tutorial1Activity <span class="keyword">extends</span> CameraActivity implements CvCameraViewListener2 {</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <a class="code" href="../../dc/d84/group__core__basic.html#ga1f6634802eeadfd7245bc75cf3e216c2">String</a> TAG = <span class="stringliteral">&quot;OCVSample::Activity&quot;</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> CameraBridgeViewBase mOpenCvCameraView;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> Tutorial1Activity() {</div><div class="line">        Log.i(TAG, <span class="stringliteral">&quot;Instantiated new &quot;</span> + this.getClass());</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> onCreate(Bundle savedInstanceState) {</div><div class="line">        Log.i(TAG, <span class="stringliteral">&quot;called onCreate&quot;</span>);</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (OpenCVLoader.initLocal()) {</div><div class="line">            Log.i(TAG, <span class="stringliteral">&quot;OpenCV loaded successfully&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            Log.e(TAG, <span class="stringliteral">&quot;OpenCV initialization failed!&quot;</span>);</div><div class="line">            (Toast.makeText(<span class="keyword">this</span>, <span class="stringliteral">&quot;OpenCV initialization failed!&quot;</span>, Toast.LENGTH_LONG)).show();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);</div><div class="line"></div><div class="line">        setContentView(R.layout.tutorial1_surface_view);</div><div class="line"></div><div class="line">        mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.tutorial1_activity_java_surface_view);</div><div class="line"></div><div class="line">        mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);</div><div class="line"></div><div class="line">        mOpenCvCameraView.setCvCameraViewListener(<span class="keyword">this</span>);</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> onPause()</div><div class="line">    {</div><div class="line">        super.onPause();</div><div class="line">        <span class="keywordflow">if</span> (mOpenCvCameraView != null)</div><div class="line">            mOpenCvCameraView.disableView();</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> onResume()</div><div class="line">    {</div><div class="line">        super.onResume();</div><div class="line">        <span class="keywordflow">if</span> (mOpenCvCameraView != null)</div><div class="line">            mOpenCvCameraView.enableView();</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">protected</span> List&lt;? extends CameraBridgeViewBase&gt; getCameraViewList() {</div><div class="line">        <span class="keywordflow">return</span> Collections.singletonList(mOpenCvCameraView);</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> onDestroy() {</div><div class="line">        super.onDestroy();</div><div class="line">        <span class="keywordflow">if</span> (mOpenCvCameraView != null)</div><div class="line">            mOpenCvCameraView.disableView();</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> onCameraViewStarted(<span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height) {</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> onCameraViewStopped() {</div><div class="line">    }</div><div class="line"></div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> Mat onCameraFrame(CvCameraViewFrame inputFrame) {</div><div class="line">        <span class="keywordflow">return</span> inputFrame.rgba();</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>This is it! Now you can run the code on your device to check it.</p>
<h2>Let's discuss some most important steps </h2>
<p>Every Android application with UI must implement Activity and View. By the first steps we create blank activity and default view layout. The simplest OpenCV-centric application must perform OpenCV initialization, create a view to show preview from camera and implement <code>CvCameraViewListener2</code> interface to get frames from camera and process them.</p>
<p>First of all we create our application view using XML layout. Our layout consists of the only one full screen component of class <code>org.opencv.android.JavaCameraView</code>. This OpenCV class is inherited from <code>CameraBridgeViewBase</code> that extends <code>SurfaceView</code> and under the hood uses standard Android camera API.</p>
<p>The <code>CvCameraViewListener2</code> interface lets you add some processing steps after the frame is grabbed from the camera and before it's rendered on the screen. The most important method is <code>onCameraFrame</code>. This is a callback function and it's called on retrieving frame from camera. It expects that <code>onCameraFrame</code> function returns RGBA frame that will be drawn on the screen.</p>
<p>The callback passes a frame from camera to our class as an object of <code>CvCameraViewFrame</code> class. This object has <code>rgba()</code> and <code>gray()</code> methods that let a user get colored or one-channel grayscale frame as a <code>Mat</code> class object.</p>
<dl class="section note"><dt>Note</dt><dd>Do not save or use <code>CvCameraViewFrame</code> object out of <code>onCameraFrame</code> callback. This object does not have its own state and its behavior outside the callback is unpredictable! </dd></dl>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 27 2023 21:56:13 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
