<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>OpenCV: Introduction into Android Development</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
//<![CDATA[
MathJax.Hub.Config(
{
  TeX: {
      Macros: {
          matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
          fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
          forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
          forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
          vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
          vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
          cameramatrix: ["#1 = \\begin{bmatrix} f_x & 0 & c_x\\\\ 0 & f_y & c_y\\\\ 0 & 0 & 1 \\end{bmatrix}", 1],
          distcoeffs: ["(k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \\tau_x, \\tau_y]]]]) \\text{ of 4, 5, 8, 12 or 14 elements}"],
          distcoeffsfisheye: ["(k_1, k_2, k_3, k_4)"],
          hdotsfor: ["\\dots", 1],
          mathbbm: ["\\mathbb{#1}", 1],
          bordermatrix: ["\\matrix{#1}", 1]
      }
  }
}
);
//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">4.9.0</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/df8/tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="../../df/d65/tutorial_table_of_content_introduction.html">Introduction to OpenCV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Introduction into Android Development </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Prev Tutorial:</b> <a class="el" href="../../d7/d1e/tutorial_clojure_dev_intro.html">Introduction to OpenCV Development with Clojure</a></p>
<p><b>Next Tutorial:</b> <a class="el" href="../../d5/df8/tutorial_dev_with_OCV_on_Android.html">Android Development with OpenCV</a></p>
<table class="doxtable">
<tr>
<th align="right"></th><th align="left"></th></tr>
<tr>
<td align="right">Original author </td><td align="left">Rostislav Vasilikhin </td></tr>
<tr>
<td align="right">Compatibility </td><td align="left">OpenCV &gt;= 4.0 </td></tr>
</table>
<p>This guide was designed to help you in learning Android development basics and setting up your working environment quickly. It was tested with Ubuntu 22.04 and Windows 10.</p>
<p>If you encounter any error after thoroughly following these steps, feel free to contact us via OpenCV <a href="https://forum.opencv.org">Forum</a>. We'll do our best to help you out.</p>
<h2>Preface </h2>
<p>Android is a Linux-based, open source mobile operating system developed by Open Handset Alliance led by Google. See the <a href="http://www.android.com/about/">Android home site</a> for general details.</p>
<p>Development for Android significantly differs from development for other platforms. So before starting programming for Android we recommend you make sure that you are familiar with the following key topics:</p>
<ol type="1">
<li><a href="http://en.wikipedia.org/wiki/Java_(programming_language)">Java</a> programming language that is the primary development technology for Android OS. Also, you can find <a href="http://docs.oracle.com/javase/">Oracle docs on Java</a> useful.</li>
<li><a href="http://en.wikipedia.org/wiki/Java_Native_Interface">Java Native Interface (JNI)</a> that is a technology of running native code in Java virtual machine. Also, you can find <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/">Oracle docs on JNI</a> useful.</li>
<li><a href="http://developer.android.com/training/basics/activity-lifecycle/starting.html">Android Activity</a> and its life-cycle, that is an essential Android API class.</li>
<li>OpenCV development will certainly require some knowledge of the <a href="http://developer.android.com/guide/topics/media/camera.html">Android Camera</a> specifics.</li>
</ol>
<h2>Manual environment setup for Android development </h2>
<p>In this tutorial we're gonna use an official Android Studio IDE and a set of other freely available tools.</p>
<h3>Get tools and dependencies</h3>
<p>Here's how to get a ready to work environment:</p>
<ol type="1">
<li>Download and install Android Studio:<ul>
<li>Ubuntu:<ol type="a">
<li>Download Android Studio: <a href="https://developer.android.com/studio">https://developer.android.com/studio</a></li>
<li>Extract the tar.gz archive</li>
<li>Follow the instructions in <code>Install-Linux-tar.txt</code>: open <code>android-studio/bin</code> folder in terminal and run <code>./studio.sh</code></li>
<li>Perform standard installation through GUI</li>
<li>Optionally you can add a shortcut on a desktop for a quick access by clicking menu <em><b>Tools -&gt; Create desktop entry</b></em>. The menu appears after any project is created or opened.</li>
</ol>
</li>
<li>Windows: Just download Android Studio from the official site and run installer.</li>
</ul>
</li>
<li>Install fresh Android SDK and NDK:<ol type="a">
<li>Open SDK manager in Android Studio (<em><b>Customize -&gt; All Settings -&gt; Languages &amp; Frameworks -&gt; Android SDK</b></em>)</li>
<li>Enable "Show Package Details" checkbox <div class="image">
<img src="../../sdk_ndk_manager.png" alt="sdk_ndk_manager.png"/>
</div>
</li>
<li>Check SDK and NDK of the latest versions and press OK</li>
<li>Make sure that your device support the chosen SDK versions</li>
</ol>
</li>
<li>Install all the necessary packages for the build:<ul>
<li><code>sudo apt install git cmake ninja-build openjdk-17-jdk openjdk-17-jre</code></li>
<li>the rest required packages are dependencies and should be installed automatically</li>
</ul>
</li>
</ol>
<h3>Check OpenCV examples</h3>
<ol type="1">
<li>Download OpenCV from Android SDK from official <a href="https://github.com/opencv/opencv/releases">release page on Github</a> or <a href="https://sourceforge.net/projects/opencvlibrary/">SourceForge</a>.</li>
<li>Extract zip archive with your OS tools.</li>
<li>Open the project <code>&lt;YOUR_OPENCV_BUILD_FOLDER&gt;/OpenCV-android-sdk/samples</code> in Android Studio.</li>
<li>Connect your device<ul>
<li>Debugging should be enabled on a device, you can find an instruction about it across the web</li>
<li>Alternatively you can use a virtual device that comes with the Android studio <div class="image">
<img src="../../choose_device.png" alt="choose_device.png"/>
</div>
</li>
</ul>
</li>
<li>Choose a sample from the drop-down menu (for example, <code>15-puzzle</code>) and run it.</li>
</ol>
<h2>Setup Device for Testing and Debugging </h2>
<p>Usually the recipe above works as expected, but in some cases there are additional actions that must be performed. In this section we'll cover some cases.</p>
<h4>Windows host computer</h4>
<p>If you have Windows 10 or higher then you don't have to do additional actions to connect a phone and run samples on it. However, earlier Windows versions require a longer procedure:</p>
<ol type="1">
<li>Enable USB debugging on the Android device (via Settings menu).</li>
<li>Attach the Android device to your PC with a USB cable.</li>
<li>Go to Start Menu and <b>right-click</b> on Computer. Select Manage in the context menu. You may be asked for Administrative permissions.</li>
<li><p class="startli">Select Device Manager in the left pane and find an unknown device in the list. You may try unplugging it and then plugging back in order to check whether it's your exact equipment appears in the list.</p>
<div class="image">
<img src="../../usb_device_connect_01.png" alt="usb_device_connect_01.png"/>
</div>
</li>
<li><p class="startli">Try your luck installing Google USB drivers without any modifications: <b>right-click</b> on the unknown device, select Properties menu item &ndash;&gt; Details tab &ndash;&gt; Update Driver button.</p>
<div class="image">
<img src="../../usb_device_connect_05.png" alt="usb_device_connect_05.png"/>
</div>
</li>
<li><p class="startli">Select Browse computer for driver software.</p>
<div class="image">
<img src="../../usb_device_connect_06.png" alt="usb_device_connect_06.png"/>
</div>
</li>
<li><p class="startli">Specify the path to <code>&lt;Android SDK folder&gt;/extras/google/usb_driver/</code> folder.</p>
<div class="image">
<img src="../../usb_device_connect_07.png" alt="usb_device_connect_07.png"/>
</div>
</li>
<li><p class="startli">If you get the prompt to install unverified drivers and report about success - you've finished with USB driver installation.</p>
<div class="image">
<img src="../../usb_device_connect_08.png" alt="usb_device_connect_08.png"/>
</div>
<div class="image">
<img src="../../usb_device_connect_09.png" alt="usb_device_connect_09.png"/>
</div>
</li>
<li><p class="startli">Otherwise (getting the failure like shown below) follow the next steps.</p>
<div class="image">
<img src="../../usb_device_connect_12.png" alt="usb_device_connect_12.png"/>
</div>
</li>
<li><p class="startli">Again <b>right-click</b> on the unknown device, select Properties &ndash;&gt; Details &ndash;&gt; Hardware Ids and copy the line like <code>USB\VID_XXXX&amp;PID_XXXX&amp;MI_XX</code>.</p>
<div class="image">
<img src="../../usb_device_connect_02.png" alt="usb_device_connect_02.png"/>
</div>
</li>
<li><p class="startli">Now open file <code>&lt;Android SDK folder&gt;/extras/google/usb_driver/android_winusb.inf</code>. Select either Google.NTx86 or Google.NTamd64 section depending on your host system architecture.</p>
<div class="image">
<img src="../../usb_device_connect_03.png" alt="usb_device_connect_03.png"/>
</div>
</li>
<li><p class="startli">There should be a record like existing ones for your device and you need to add one manually.</p>
<div class="image">
<img src="../../usb_device_connect_04.png" alt="usb_device_connect_04.png"/>
</div>
</li>
<li><p class="startli">Save the <code>android_winusb.inf</code> file and try to install the USB driver again.</p>
<div class="image">
<img src="../../usb_device_connect_05.png" alt="usb_device_connect_05.png"/>
</div>
<div class="image">
<img src="../../usb_device_connect_06.png" alt="usb_device_connect_06.png"/>
</div>
<div class="image">
<img src="../../usb_device_connect_07.png" alt="usb_device_connect_07.png"/>
</div>
</li>
<li><p class="startli">This time installation should go successfully.</p>
<div class="image">
<img src="../../usb_device_connect_08.png" alt="usb_device_connect_08.png"/>
</div>
<div class="image">
<img src="../../usb_device_connect_09.png" alt="usb_device_connect_09.png"/>
</div>
</li>
<li><p class="startli">And an unknown device is now recognized as an Android phone.</p>
<div class="image">
<img src="../../usb_device_connect_10.png" alt="usb_device_connect_10.png"/>
</div>
</li>
<li><p class="startli">Successful device USB connection can be verified in console via adb devices command.</p>
<div class="image">
<img src="../../usb_device_connect_11.png" alt="usb_device_connect_11.png"/>
</div>
</li>
<li>Now, in Eclipse go Run -&gt; Run/Debug to run your application in regular or debugging mode. Device Chooser will let you choose among the devices.</li>
</ol>
<h4>Linux host computer</h4>
<p>While the latest Ubuntu versions work well with connected Android devices, there can be issues on older versions. However, most of them can be fixed easily. You have to create a new **/etc/udev/rules.d/51-android.rules** configuration file that contains information about your Android device. You may find some Vendor ID's <a href="http://developer.android.com/tools/device.html#VendorIds">here</a> or execute lsusb command to view VendorID of plugged Android device. Here is an example of such file for LG device: </p><div class="fragment"><div class="line">SUBSYSTEM==&quot;usb&quot;, ATTR{idVendor}==&quot;1004&quot;,  MODE=&quot;0666&quot;, GROUP=&quot;plugdev&quot;</div></div><!-- fragment --><p> Then restart your adb server (even better to restart the system), plug in your Android device and execute adb devices command. You will see the list of attached devices:</p>
<div class="fragment"><div class="line">savuor@rostislav-laptop:~/Android/Sdk/platform-tools$ ./adb devices</div><div class="line">List of devices attached</div><div class="line">R58MB40Q3VP     device</div><div class="line"></div><div class="line">savuor@rostislav-laptop:~/Android/Sdk/platform-tools$</div></div><!-- fragment --><h4>Mac OS host computer</h4>
<p>No actions are required, just connect your device via USB and run adb devices to check connection.</p>
<h2>What's next </h2>
<p>Now, when you have your instance of OpenCV4Adroid SDK set up and configured, you may want to proceed to using OpenCV in your own application. You can learn how to do that in a separate <a class="el" href="../../d5/df8/tutorial_dev_with_OCV_on_Android.html">Android Development with OpenCV</a> tutorial. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 27 2023 21:56:13 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
